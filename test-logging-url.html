<!DOCTYPE html>
<html>
<head>
    <title>Test Logging URL</title>
</head>
<body>
    <h1>Test Logging URL</h1>
    <button onclick="testLogging()">Test Logging Endpoint</button>
    <div id="output"></div>
    
    <script>
        async function testLogging() {
            const output = document.getElementById('output');
            
            // Your Apps Script URL
            const scriptUrl = 'https://script.google.com/macros/s/AKfycbzfxzCOV17GFvAXuIkHMCMOmg9yJz6mcjekQ-jraaIKLGV7rX6eW5LqtIbk_Ba2VBPecQ/exec';
            
            // Test logging URL
            const testParams = new URLSearchParams({
                action: 'log',
                email: 'test@example.com',
                affiliation: 'Test Affiliation',
                eventId: 'TEST123',
                eventTitle: 'Test Event',
                promoCode: 'TEST',
                registrationUrl: 'https://example.com'
            });
            
            const logUrl = `${scriptUrl}?${testParams}`;
            
            output.innerHTML = '<h2>Testing...</h2>';
            output.innerHTML += '<p><strong>URL:</strong> ' + logUrl + '</p>';
            
            try {
                const response = await fetch(logUrl);
                const result = await response.json();
                
                output.innerHTML += '<p><strong>Response:</strong> ' + JSON.stringify(result, null, 2) + '</p>';
                
                if (result.status === 'success' && result.message) {
                    output.innerHTML += '<p style="color: green;"><strong>✅ Logging endpoint working!</strong></p>';
                } else {
                    output.innerHTML += '<p style="color: red;"><strong>❌ Logging endpoint not working - returned events data instead</strong></p>';
                }
            } catch (error) {
                output.innerHTML += '<p style="color: red;"><strong>❌ Error:</strong> ' + error.message + '</p>';
            }
        }
    </script>
</body>
</html> 