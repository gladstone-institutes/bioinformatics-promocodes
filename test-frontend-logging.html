<!DOCTYPE html>
<html>
<head>
    <title>Frontend Logging Test</title>
</head>
<body>
    <h1>Frontend Logging Configuration Test</h1>
    <button onclick="testConfig()">Test Configuration</button>
    <button onclick="testDirectLogging()">Test Direct Logging</button>
    <div id="output"></div>
    
    <script src="config.js"></script>
    <script>
        function testConfig() {
            const output = document.getElementById('output');
            output.innerHTML = '<h2>Configuration Test:</h2>';
            
            // Test if config is loaded
            output.innerHTML += '<p><strong>window.APP_CONFIG:</strong> ' + JSON.stringify(window.APP_CONFIG, null, 2) + '</p>';
            
            // Test specific URL
            const scriptUrl = window.APP_CONFIG?.GOOGLE_SHEETS?.APPS_SCRIPT_URL;
            output.innerHTML += '<p><strong>Apps Script URL:</strong> ' + scriptUrl + '</p>';
            
            // Test if URL is configured
            if (!scriptUrl || scriptUrl === 'YOUR_GOOGLE_APPS_SCRIPT_DEPLOYMENT_URL') {
                output.innerHTML += '<p style="color: red;"><strong>❌ Apps Script URL not configured!</strong></p>';
            } else {
                output.innerHTML += '<p style="color: green;"><strong>✅ Apps Script URL is configured</strong></p>';
            }
        }
        
        async function testDirectLogging() {
            const output = document.getElementById('output');
            output.innerHTML = '<h2>Direct Logging Test:</h2>';
            
            const scriptUrl = window.APP_CONFIG?.GOOGLE_SHEETS?.APPS_SCRIPT_URL;
            
            if (!scriptUrl || scriptUrl === 'YOUR_GOOGLE_APPS_SCRIPT_DEPLOYMENT_URL') {
                output.innerHTML += '<p style="color: red;">❌ Cannot test - Apps Script URL not configured</p>';
                return;
            }
            
            const testData = {
                email: 'test-frontend@gladstone.org',
                affiliation: 'Gladstone',
                eventId: 'FRONTEND-TEST',
                eventTitle: 'Frontend Test Event',
                promoCode: 'FRONTEND-TEST',
                registrationUrl: 'https://example.com/test'
            };
            
            output.innerHTML += '<p><strong>Sending test data:</strong> ' + JSON.stringify(testData, null, 2) + '</p>';
            output.innerHTML += '<p><strong>To URL:</strong> ' + scriptUrl + '</p>';
            
            try {
                const response = await fetch(scriptUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(testData)
                });
                
                const result = await response.json();
                output.innerHTML += '<p><strong>Response status:</strong> ' + response.status + '</p>';
                output.innerHTML += '<p><strong>Response data:</strong> ' + JSON.stringify(result, null, 2) + '</p>';
                
                if (result.status === 'success') {
                    output.innerHTML += '<p style="color: green;"><strong>✅ Logging test successful!</strong></p>';
                } else {
                    output.innerHTML += '<p style="color: red;"><strong>❌ Logging test failed</strong></p>';
                }
            } catch (error) {
                output.innerHTML += '<p style="color: red;"><strong>❌ Error:</strong> ' + error.message + '</p>';
            }
        }
    </script>
</body>
</html> 